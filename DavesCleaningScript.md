# AutoSend Script

A Node.js utility that monitors a wallet on an EVM-compatible chain and automatically sweeps excess ETH and TOSHIBA tokens to a destination address.

## Use Case

* **Automated Sweeps**: Ensures your wallet never accumulates more than a specified amount of native tokens (ETH) and TOSHIBA tokens by sending the excess to a secure destination.
* **Gas Reserve**: Maintains a minimum ETH balance for transaction fees, so the wallet can always pay for gas on future operations.
* **Simplicity**: Designed for easy deployment and management via a process manager (PM2, Docker, etc.).

## How It Works

1. **Wallet & Provider Initialization**: Uses your private key and RPC endpoint to create an `ethers.js` provider and wallet instance.
2. **Threshold Checks (Every 60s)**:

   * **ETH Balance**:

     * If the wallet balance â‰¥ `0.011 ETH`:

       * Estimates gas fee for a simple transfer.
       * Calculates `sendAmt = balance - gasFee - 0.001 ETH` (leaves 0.001 ETH behind).
       * Sends `sendAmt` to your `DESTINATION_ADDRESS`.
   * **TOSHIBA Token**:

     * If the token balance > `123456` tokens (adjusted for token decimals):

       * Transfers the entire token balance to `DESTINATION_ADDRESS`.
3. **Logging**: Outputs balances, thresholds, and transaction hashes to the console.

## Prerequisites

* **Node.js** v18 or newer
* **npm** or **yarn**
* An EVM-compatible RPC endpoint (e.g. Base, Ethereum, BSC)
* Destination wallet address
* Source wallet private key with sufficient permissions

## Installation

1. **Clone the repo**

   ```bash
   git clone https://github.com/your-repo/auto-send-script.git
   cd auto-send-script
   ```

2. **Install dependencies**

   ```bash
   npm install
   # or
   yarn install
   ```

## Configuration

1. **Environment Variables**: Create a `.env` file in the root:

   ```ini
   # RPC endpoint
   RPC_URL=https://mainnet.base.org

   # Private key of the source wallet
   PRIVATE_KEY=0xYOUR_PRIVATE_KEY

   # Address to receive swept funds
   DESTINATION_ADDRESS=0xb2C84F1B0b517aFbEeF7C0910f5Bdada72a8B3D7

   # ERC-20 Toshiba token address
   TOSHIBA_TOKEN_ADDRESS=0x459F65A7aaB8c08220ac636Ef633508E697e15d8
   ```

2. **Adjust Thresholds**: In `autoSend.js`, you can modify:

   ```js
   // Minimum ETH to keep in wallet
   const MIN_KEEP_BALANCE      = parseEther('0.001');

   // ETH balance threshold to trigger a sweep
   const NATIVE_SEND_THRESHOLD = parseEther('0.011');

   // Toshiba token count threshold (human-readable)
   const TOKEN_THRESHOLD_COUNT = '123456';
   ```

   * **MIN\_KEEP\_BALANCE**: Amount of ETH left in wallet after sweep.
   * **NATIVE\_SEND\_THRESHOLD**: ETH balance at or above this triggers sending.
   * **TOKEN\_THRESHOLD\_COUNT**: Number of Toshiba tokens (before decimals) to trigger token sweep.

## Running the Script

### Directly with Node

```bash
node autoSend.js
```

### Using PM2 (recommended)

```bash
npm install -g pm2
pm2 start autoSend.js --name auto-send
pm2 logs auto-send
```

### Docker (optional)

1. **Build Docker image**

   ```bash
   docker build -t auto-send .
   ```
2. **Run container**

   ```bash
   docker run -d \
     --name auto-send \
     --env-file .env \
     auto-send
   ```

## Notes

* Ensure your RPC endpoint and private key are kept secure.
* Monitor logs regularly to confirm sweeps are occurring as expected.
* Adjust thresholds according to network fees and token economics.

---

*Generated by AutoSend Script.*
